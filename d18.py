s = """
.#.#...|#.
.....#|##|
.|..|...#.
..|#.....#
#.#|||#|#|
...#.||...
.|....|...
||...#|.#|
|.||||..|.
...#.|..|.
"""

s = """
...##.....|..|#.##|#.......#...#|.|..#..#|#||#..##
|#.#...||.#|.....|#|.#.|....#......|#.|....#....#.
..#..#.#..#..||.#.##|#|.|..|........|#...#|.|.||#.
|#....|.|.#.|....||###|.|#|..........#...#....#|.#
#.....|....#...#|||#.......|#.........|#..###|.#|#
..#.|.|...||#...||.#|...#.|...###|....|||.#|.#....
.|..#..#.##|...|##...#.##.|.|..|.#...#|..|.#|.....
#||.|||.#..###|....|.|...|||...|||.|...||||#...#|.
#|..||.#..#..#|.|##.......#|#....#...##.|#...#.#||
..#....#...|....||.#||.##|#.#|.....#.#|.|#...#.#.|
.|#|.||......|#....#..|#|#.##.|...|....|#.|.#.#.#.
.....||##...||..#.||......#|.||..|.|..|..........|
#|#..#||.|....||.|..|...||....|..|...##........|..
.|#.|#|..|##...||.|##.#...#|#..|.#.|.|#..|..#...#.
##.......#.|....|.|#.|.#..#.#|.#|..###...#...#..|.
#..#.....##.....#...##.|..#..##.|.#.##.....|.|..##
....#.||....|.....|...|..#...|.|.....#.##||....#..
|#.#..#..#.........||#..|.|#...........|.|#......#
|#..#.|..#..|.#..||.##..|.#.|..||...||.|.#|....#.|
#.#|.....#..||#....#.|..#..|.#|....|..|....|#....|
......||....||||.........##|....#..||.|.......|...
#.....|..#.|.##|..|.|.|#.#..|.....|..|#.|..|.|..#.
###|.|.#..##.#.|#...##||.#|...##|#....##...#....#|
..|...##....#.....##......|.#|..|...#|#.||#..|.|..
|.||#..||....#..|......#|.#.##.#..|.#|#.|...##||#.
#.#.|..|.....|#.#|#.##||...||.||.||.||......|....#
..#|.......|#|.|....|...#.#|..||.#.#||.#..#|.....|
...|#.##|...#.|...#.|....#.##...|.#.#..#.....#|...
.....#.....|...#.##.#.|......|...#.#|.....|.#.|.#.
..#....#..|...|||..#..#.......#|..|..#|.|...|#..#|
..||||........#|.#.##...|..|||#...|...#|.|###...||
||#.##.||.....#..||...........|....|.....|#|||#...
..|||#..|.||..|#.|#.#...#|#...|.###.#...|...#....#
...........|||..|||#.#...#|....####.##||...|..|...
.##.#|##|....#..|.#|#|.......|.|.....#..|...|||...
..#...|.|..#..#..|###.#........|......#.#....##|..
#.|..|#|.#.#..||...#.#.....|#.|#......#||.#.|.#...
...#.....##.|##...#..#|.#.#.#..||..|#....#####..|.
.....#...#.#|........##|#.#.#....|.|........#|||..
|..##|#.|.|...||#..#.|..#..##..#|.......#|#.#..|.|
|..|....#..|..|....#.|...##....|#...|...|.|#.|...|
..|.|#|#...|.##..##|||..#..|...#..#||...#|.|.#|.|.
.|...||.##.#...|.#.#...###||.|###|......|#....####
.|.#..#.|..|##.....|.|.#.#||.#|.......|#..|##.||..
...|..||...#|.|..|.....|.#.##.#..#...|##.|..##..#.
##.|.#...#|#|...##|#.....|..|#.#.#.##.#|...||..#..
##|.#..|....#..#|.#|..||...#......#.#|.#.#|..#|#..
|....|.#|#......|....#.#.....|..#.|...|##....|.||#
|.#.|...#...||#.##...|.|..#||...|..##|#......#.|..
...|#.|......#....#......#.....#.#|..||..|#..#...#
"""

g = []
for line in s.split('\n'):
    if not line.strip(): continue
    g.append(list('X' + line.strip() + 'X'))
g = [['X'] * len(g[0])] + g + [['X'] * len(g[0])]

def pg(g):
    print('\n'.join(''.join(r) for r in g))

for n in range(1000000000):

    rows = []
    for i in range(1, len(g) - 1):
        row = []
        for j in range(1, len(g[0]) - 1):
            n_trees = 0
            n_lumbers = 0
            for a in (-1, 0, 1):
                for b in (-1, 0, 1):
                    if a == 0 and b == 0:
                        continue
                    n_trees += 1 if g[i + a][j + b] == '|' else 0
                    n_lumbers += 1 if g[i + a][j + b] == '#' else 0

            if g[i][j] == '.' and n_trees >= 3:
                row.append('|')
            elif g[i][j] == '.':
                row.append('.')

            if g[i][j] == '|' and n_lumbers >= 3:
                row.append('#')
            elif g[i][j] == '|':
                row.append('|')

            if g[i][j] == '#' and n_lumbers >= 1 and n_trees >= 1:
                row.append('#')
            elif g[i][j] == '#':
                row.append('.')

        rows.append(['X'] + row + ['X'])

    g = [['X'] * len(rows[0])] + rows + [['X'] * len(rows[0])]

    if (n + 1) % 1000 == 0:

        n_trees = 0
        n_lumbers = 0
        for i in range(1, len(g) - 1):
            for j in range(1, len(g[0]) - 1):
                n_trees += 1 if g[i][j] == '|' else 0
                n_lumbers += 1 if g[i][j] == '#' else 0

        print(n + 1, n_trees * n_lumbers)
